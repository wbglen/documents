<!DOCTYPE html>
<!-- saved from url=(0050)https://www.cnkirito.moe/Spring-Security-OAuth2-1/ -->
<html lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="generator" content="Hexo 3.8.0">
    
    
    <title>Re：从零开始的Spring Security OAuth2（一） | 徐靖峰|个人博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="前言今天来聊聊一个接口对接的场景，A厂家有一套HTTP接口需要提供给B厂家使用，由于是外网环境，所以需要有一套安全机制保障，这个时候oauth2就可以作为一个方案。 关于oauth2，其实是一个规范，本文重点讲解spring对他进行的实现，如果你还不清楚授权服务器，资源服务器，认证授权等基础概念，可以移步理解OAuth 2.0 - 阮一峰，这是一篇对于oauth2很好的科普文章。  需要对spri">
<meta name="keywords" content="Spring Security OAuth2">
<meta property="og:type" content="article">
<meta property="og:title" content="Re：从零开始的Spring Security OAuth2（一）">
<meta property="og:url" content="http://lexburner.github.io/Spring-Security-OAuth2-1/index.html">
<meta property="og:site_name" content="徐靖峰|个人博客">
<meta property="og:description" content="前言今天来聊聊一个接口对接的场景，A厂家有一套HTTP接口需要提供给B厂家使用，由于是外网环境，所以需要有一套安全机制保障，这个时候oauth2就可以作为一个方案。 关于oauth2，其实是一个规范，本文重点讲解spring对他进行的实现，如果你还不清楚授权服务器，资源服务器，认证授权等基础概念，可以移步理解OAuth 2.0 - 阮一峰，这是一篇对于oauth2很好的科普文章。  需要对spri">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://kirito.iocoder.cn/20170808145230975.png">
<meta property="og:image" content="http://kirito.iocoder.cn/20170808145304794.png">
<meta property="og:image" content="http://kirito.iocoder.cn/qrcode_for_gh_c06057be7960_258%20%281%29.jpg">
<meta property="og:updated_time" content="2018-11-20T11:53:58.313Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Re：从零开始的Spring Security OAuth2（一）">
<meta name="twitter:description" content="前言今天来聊聊一个接口对接的场景，A厂家有一套HTTP接口需要提供给B厂家使用，由于是外网环境，所以需要有一套安全机制保障，这个时候oauth2就可以作为一个方案。 关于oauth2，其实是一个规范，本文重点讲解spring对他进行的实现，如果你还不清楚授权服务器，资源服务器，认证授权等基础概念，可以移步理解OAuth 2.0 - 阮一峰，这是一篇对于oauth2很好的科普文章。  需要对spri">
<meta name="twitter:image" content="http://kirito.iocoder.cn/20170808145230975.png">
    

    
        <link rel="alternate" href="https://www.cnkirito.moe/atom.xml" title="徐靖峰|个人博客" type="application/atom+xml">
    

    
        <link rel="icon" href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/avatar.png">
    

    <link rel="stylesheet" href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/font-awesome.min.css">
    <link rel="stylesheet" href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/styles.css">
    <link rel="stylesheet" href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/styles(1).css">

    <link rel="stylesheet" href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/style.css">

    <script async="" src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/analytics.js"></script><script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lightgallery.min.css">
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-118574570-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>
<body>

    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="https://www.cnkirito.moe/" id="logo">
                <i class="logo"></i>
                <span class="site-title">徐靖峰|个人博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="https://www.cnkirito.moe/">主页</a>
                
                    <a class="main-nav-link" href="https://www.cnkirito.moe/categories">分类</a>
                
                    <a class="main-nav-link" href="https://www.cnkirito.moe/archives">归档</a>
                
                    <a class="main-nav-link" href="https://www.cnkirito.moe/about">关于</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/avatar.png">
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
        <button type="submit" class="search-form-submit"></button>
    </form>
    
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tbody><tr>
                
                    <td><a class="main-nav-link" href="https://www.cnkirito.moe/">主页</a></td>
                
                    <td><a class="main-nav-link" href="https://www.cnkirito.moe/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="https://www.cnkirito.moe/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="https://www.cnkirito.moe/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
    </div>

                </td>
            </tr>
        </tbody></table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner anim-fade-in" style="position: fixed; width: 345px; top: 0px;">
        <div class="base-info profile-block">
            <img id="avatar" src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/avatar.png">
            <h2 id="name">徐靖峰</h2>
            <h3 id="title">software engineer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Nanking, China</span>
            <a id="follow" target="_blank" href="https://github.com/lexburner">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                109
                <span>文章</span>
            </div>
            <div class="article-info-block">
                50
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tbody><tr>
                    
                    
                    <td>
                        <a href="https://github.com/lexburner" target="_blank" title="github" class="tooltip">
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.cnkirito.moe/css/images/kirito_wechat.jpg" target="_blank" title="wechat" class="tooltip">
                            <i class="fa fa-wechat"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.cnkirito.moe/atom.xml" target="_blank" title="rss" class="tooltip">
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </tbody></table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-Spring-Security-OAuth2-1" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Re：从零开始的Spring Security OAuth2（一）
        </h1>
    

                
                    <div class="article-meta">
                        <!-- 增加文章类型 -->
                        
	
		<div class="article-type">
		    <span class="label label-success" style="float: left;padding: 3px 5px 3px 5px;margin-right: 15px;margin-top: 2px;">原创</span>
		</div>
	
	
	
		
	

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/">
            <time datetime="2017-08-08T07:16:52.000Z" itemprop="datePublished">2017-08-08</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="https://www.cnkirito.moe/categories/Spring-Security-OAuth2/">Spring Security OAuth2</a>
    </div>

                        <!-- 不显示标签 -->
                        <!-- 
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Spring-Security-OAuth2/">Spring Security OAuth2</a>
    </div>
 -->
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody" lg-uid="lg0">
        
            
            <h2 id="前言"><a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/#%E5%89%8D%E8%A8%80" class="headerlink" title="前言"></a>前言</h2><p>今天来聊聊一个接口对接的场景，A厂家有一套HTTP接口需要提供给B厂家使用，由于是外网环境，所以需要有一套安全机制保障，这个时候oauth2就可以作为一个方案。</p>
<p>关于oauth2，其实是一个规范，本文重点讲解spring对他进行的实现，如果你还不清楚授权服务器，资源服务器，认证授权等基础概念，可以移步<a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="noopener">理解OAuth 2.0 - 阮一峰</a>，这是一篇对于oauth2很好的科普文章。 </p>
<p>需要对spring security有一定的配置使用经验，用户认证这一块，spring security oauth2建立在spring security的基础之上。第一篇文章主要是讲解使用springboot搭建一个简易的授权，资源服务器，在文末会给出具体代码的github地址。后续文章会进行spring security oauth2的相关源码分析。java中的安全框架如shrio，已经有<a href="http://jinnianshilongnian.iteye.com/blog/2018936" target="_blank" rel="noopener">跟我学shiro - 开涛</a>，非常成体系地，深入浅出地讲解了apache的这个开源安全框架，但是spring security包括oauth2一直没有成体系的文章，学习它们大多依赖于较少的官方文档，理解一下基本的使用配置；通过零散的博客，了解一下他人的使用经验；打断点，分析内部的工作流程；看源码中的接口设计，以及注释，了解设计者的用意。spring的各个框架都运用了很多的设计模式，在学习源码的过程中，也大概了解了一些套路。spring也在必要的地方添加了适当的注释，避免了源码阅读者对于一些细节设计的理解产生偏差，让我更加感叹，spring不仅仅是一个工具框架，更像是一个艺术品。</p>
<a id="more"></a>
<h2 id="概述"><a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/#%E6%A6%82%E8%BF%B0" class="headerlink" title="概述"></a>概述</h2><p>使用oauth2保护你的应用，可以分为简易的分为三个步骤</p>
<ul>
<li>配置资源服务器</li>
<li>配置认证服务器</li>
<li>配置spring security</li>
</ul>
<p>前两点是oauth2的主体内容，但前面我已经描述过了，spring security oauth2是建立在spring security基础之上的，所以有一些体系是公用的。</p>
<p>oauth2根据使用场景不同，分成了4种模式</p>
<ul>
<li>授权码模式（authorization code）</li>
<li>简化模式（implicit）</li>
<li>密码模式（resource owner password credentials）</li>
<li>客户端模式（client credentials）</li>
</ul>
<p>本文重点讲解接口对接中常使用的密码模式（以下简称password模式）和客户端模式（以下简称client模式）。授权码模式使用到了回调地址，是最为复杂的方式，通常网站中经常出现的微博，qq第三方登录，都会采用这个形式。简化模式不常用。</p>
<h2 id="项目准备"><a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/#%E9%A1%B9%E7%9B%AE%E5%87%86%E5%A4%87" class="headerlink" title="项目准备"></a>项目准备</h2><p>主要的maven依赖如下</p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注意是starter,自动配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 不是starter,手动配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security.oauth<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-oauth2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 将token存储在redis中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p>我们给自己先定个目标，要干什么事？既然说到保护应用，那必须得先有一些资源，我们创建一个endpoint作为提供给外部的接口：<br></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestEndpoints</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/product/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getProduct</span><span class="params">(@PathVariable String id)</span> </span>{</span><br><span class="line">        <span class="comment">//for debug</span></span><br><span class="line">        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"product id : "</span> + id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/order/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getOrder</span><span class="params">(@PathVariable String id)</span> </span>{</span><br><span class="line">	    <span class="comment">//for debug</span></span><br><span class="line">        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"order id : "</span> + id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>暴露一个商品查询接口，后续不做安全限制，一个订单查询接口，后续添加访问控制。</p>
<h2 id="配置资源服务器和授权服务器"><a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/#%E9%85%8D%E7%BD%AE%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E6%8E%88%E6%9D%83%E6%9C%8D%E5%8A%A1%E5%99%A8" class="headerlink" title="配置资源服务器和授权服务器"></a>配置资源服务器和授权服务器</h2><p>由于是两个oauth2的核心配置，我们放到一个配置类中。<br>为了方便下载代码直接运行，我这里将客户端信息放到了内存中，生产中可以配置到数据库中。token的存储一般选择使用redis，一是性能比较好，二是自动过期的机制，符合token的特性。<br></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OAuth2ServerConfig</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEMO_RESOURCE_ID = <span class="string">"order"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration</span></span><br><span class="line">    <span class="meta">@EnableResourceServer</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceServerConfiguration</span> <span class="keyword">extends</span> <span class="title">ResourceServerConfigurerAdapter</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(ResourceServerSecurityConfigurer resources)</span> </span>{</span><br><span class="line">            resources.resourceId(DEMO_RESOURCE_ID).stateless(<span class="keyword">true</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">            <span class="comment">// @formatter:off</span></span><br><span class="line">            http</span><br><span class="line">                    <span class="comment">// Since we want the protected resources to be accessible in the UI as well we need</span></span><br><span class="line">                    <span class="comment">// session creation to be allowed (it's disabled by default in 2.0.6)</span></span><br><span class="line">                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)</span><br><span class="line">                    .and()</span><br><span class="line">                    .requestMatchers().anyRequest()</span><br><span class="line">                    .and()</span><br><span class="line">                    .anonymous()</span><br><span class="line">                    .and()</span><br><span class="line">                    .authorizeRequests()</span><br><span class="line"><span class="comment">//                    .antMatchers("/product/**").access("#oauth2.hasScope('select') and hasRole('ROLE_USER')")</span></span><br><span class="line">                    .antMatchers(<span class="string">"/order/**"</span>).authenticated();<span class="comment">//配置order访问控制，必须认证过后才可以访问</span></span><br><span class="line">            <span class="comment">// @formatter:on</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Configuration</span></span><br><span class="line">    <span class="meta">@EnableAuthorizationServer</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthorizationServerConfiguration</span> <span class="keyword">extends</span> <span class="title">AuthorizationServerConfigurerAdapter</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        AuthenticationManager authenticationManager;</span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        RedisConnectionFactory redisConnectionFactory;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(ClientDetailsServiceConfigurer clients)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">            <span class="comment">//配置两个客户端,一个用于password认证一个用于client认证</span></span><br><span class="line">            clients.inMemory().withClient(<span class="string">"client_1"</span>)</span><br><span class="line">                    .resourceIds(DEMO_RESOURCE_ID)</span><br><span class="line">                    .authorizedGrantTypes(<span class="string">"client_credentials"</span>, <span class="string">"refresh_token"</span>)</span><br><span class="line">                    .scopes(<span class="string">"select"</span>)</span><br><span class="line">                    .authorities(<span class="string">"client"</span>)</span><br><span class="line">                    .secret(<span class="string">"123456"</span>)</span><br><span class="line">                    .and().withClient(<span class="string">"client_2"</span>)</span><br><span class="line">                    .resourceIds(DEMO_RESOURCE_ID)</span><br><span class="line">                    .authorizedGrantTypes(<span class="string">"password"</span>, <span class="string">"refresh_token"</span>)</span><br><span class="line">                    .scopes(<span class="string">"select"</span>)</span><br><span class="line">                    .authorities(<span class="string">"client"</span>)</span><br><span class="line">                    .secret(<span class="string">"123456"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthorizationServerEndpointsConfigurer endpoints)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">            endpoints</span><br><span class="line">                    .tokenStore(<span class="keyword">new</span> RedisTokenStore(redisConnectionFactory))</span><br><span class="line">                    .authenticationManager(authenticationManager);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthorizationServerSecurityConfigurer oauthServer)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">            <span class="comment">//允许表单认证</span></span><br><span class="line">            oauthServer.allowFormAuthenticationForClients();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>简单说下spring security oauth2的认证思路。</p>
<ul>
<li><p>client模式，没有用户的概念，直接与认证服务器交互，用配置中的客户端信息去申请accessToken，客户端有自己的client_id,client_secret对应于用户的username,password，而客户端也拥有自己的authorities，当采取client模式认证时，对应的权限也就是客户端自己的authorities。</p>
</li>
<li><p>password模式，自己本身有一套用户体系，在认证时需要带上自己的用户名和密码，以及客户端的client_id,client_secret。此时，accessToken所包含的权限是用户本身的权限，而不是客户端的权限。</p>
</li>
</ul>
<p>我对于两种模式的理解便是，如果你的系统已经有了一套用户体系，每个用户也有了一定的权限，可以采用password模式；如果仅仅是接口的对接，不考虑用户，则可以使用client模式。</p>
<h2 id="配置spring-security"><a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/#%E9%85%8D%E7%BD%AEspring-security" class="headerlink" title="配置spring security"></a>配置spring security</h2><p>在spring security的版本迭代中，产生了多种配置方式，建造者模式，适配器模式等等设计模式的使用，spring security内部的认证flow也是错综复杂，在我一开始学习ss也产生了不少困惑，总结了一下配置经验：使用了springboot之后，spring security其实是有不少自动配置的，我们可以仅仅修改自己需要的那一部分，并且遵循一个原则，直接覆盖最需要的那一部分。这一说法比较抽象，举个例子。比如配置内存中的用户认证器。有两种配置方式</p>
<p>planA：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> UserDetailsService <span class="title">userDetailsService</span><span class="params">()</span></span>{</span><br><span class="line">    InMemoryUserDetailsManager manager = <span class="keyword">new</span> InMemoryUserDetailsManager();</span><br><span class="line">    manager.createUser(User.withUsername(<span class="string">"user_1"</span>).password(<span class="string">"123456"</span>).authorities(<span class="string">"USER"</span>).build());</span><br><span class="line">    manager.createUser(User.withUsername(<span class="string">"user_2"</span>).password(<span class="string">"123456"</span>).authorities(<span class="string">"USER"</span>).build());</span><br><span class="line">    <span class="keyword">return</span> manager;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>planB：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfiguration</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">"user_1"</span>).password(<span class="string">"123456"</span>).authorities(<span class="string">"USER"</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">"user_2"</span>).password(<span class="string">"123456"</span>).authorities(<span class="string">"USER"</span>);</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> AuthenticationManager <span class="title">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">       AuthenticationManager manager = <span class="keyword">super</span>.authenticationManagerBean();</span><br><span class="line">        <span class="keyword">return</span> manager;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>你最终都能得到配置在内存中的两个用户，前者是直接替换掉了容器中的UserDetailsService，这么做比较直观；后者是替换了AuthenticationManager，当然你还会在SecurityConfiguration 复写其他配置，这么配置最终会由一个委托者去认证。如果你熟悉spring security，会知道AuthenticationManager和AuthenticationProvider以及UserDetailsService的关系，他们都是顶级的接口，实现类之间错综复杂的聚合关系…配置方式千差万别，但理解清楚认证流程，知道各个实现类对应的职责才是掌握spring security的关键。</p>
<p>下面给出我最终的配置：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfiguration</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> UserDetailsService <span class="title">userDetailsService</span><span class="params">()</span></span>{</span><br><span class="line">        InMemoryUserDetailsManager manager = <span class="keyword">new</span> InMemoryUserDetailsManager();</span><br><span class="line">        manager.createUser(User.withUsername(<span class="string">"user_1"</span>).password(<span class="string">"123456"</span>).authorities(<span class="string">"USER"</span>).build());</span><br><span class="line">        manager.createUser(User.withUsername(<span class="string">"user_2"</span>).password(<span class="string">"123456"</span>).authorities(<span class="string">"USER"</span>).build());</span><br><span class="line">        <span class="keyword">return</span> manager;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">        <span class="comment">// @formatter:off</span></span><br><span class="line">        http</span><br><span class="line">            .requestMatchers().anyRequest()</span><br><span class="line">            .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">"/oauth/*"</span>).permitAll();</span><br><span class="line">        <span class="comment">// @formatter:on</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>重点就是配置了一个UserDetailsService，和ClientDetailsService一样，为了方便运行，使用内存中的用户，实际项目中，一般使用的是数据库保存用户，具体的实现类可以使用JdbcDaoImpl或者JdbcUserDetailsManager。</p>
<h2 id="获取token"><a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/#%E8%8E%B7%E5%8F%96token" class="headerlink" title="获取token"></a>获取token</h2><p>进行如上配置之后，启动springboot应用就可以发现多了一些自动创建的endpoints：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{[/oauth/authorize]}</span><br><span class="line">{[/oauth/authorize],methods=[POST]</span><br><span class="line">{[/oauth/token],methods=[GET]}</span><br><span class="line">{[/oauth/token],methods=[POST]}</span><br><span class="line">{[/oauth/check_token]}</span><br><span class="line">{[/oauth/error]}</span><br></pre></td></tr></tbody></table></figure>
<p>重点关注一下/oauth/token，它是获取的token的endpoint。启动springboot应用之后，使用http工具访问<br>password模式：</p>
<p><code>http://localhost:8080/oauth/token?username=user_1&amp;password=123456&amp;grant_type=password&amp;scope=select&amp;client_id=client_2&amp;client_secret=123456</code></p>
<p>响应如下：<br><code>{"access_token":"950a7cc9-5a8a-42c9-a693-40e817b1a4b0","token_type":"bearer","refresh_token":"773a0fcd-6023-45f8-8848-e141296cb3cb","expires_in":27036,"scope":"select"}</code></p>
<p>client模式：<br><code>http://localhost:8080/oauth/token?grant_type=client_credentials&amp;scope=select&amp;client_id=client_1&amp;client_secret=123456</code></p>
<p>响应如下：<br><code>{"access_token":"56465b41-429d-436c-ad8d-613d476ff322","token_type":"bearer","expires_in":25074,"scope":"select"}</code></p>
<p>在配置中，我们已经配置了对order资源的保护，如果直接访问:<code>http://localhost:8080/order/1</code>会得到这样的响应:<code>{"error":"unauthorized","error_description":"Full authentication is required to access this resource"}</code><br>（这样的错误响应可以通过重写配置来修改）</p>
<p>而对于未受保护的product资源<code>http://localhost:8080/product/1</code>则可以直接访问，得到响应<code>product id : 1</code></p>
<p>携带accessToken参数访问受保护的资源：</p>
<p>使用password模式获得的token:<code>http://localhost:8080/order/1?access_token=950a7cc9-5a8a-42c9-a693-40e817b1a4b0</code>，得到了之前匿名访问无法获取的资源：<code>order id : 1</code></p>
<p>使用client模式获得的token:<code>http://localhost:8080/order/1?access_token=56465b41-429d-436c-ad8d-613d476ff322</code>，同上的响应<code>order id : 1</code></p>
<p>我们重点关注一下debug后，对资源访问时系统记录的用户认证信息，可以看到如下的debug信息</p>
<p>password模式：</p>
<p><a href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/20170808145230975.png" title="password模式" class="gallery-item" lg-event-uid="&amp;1"><img src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/20170808145230975.png" alt="password模式"></a><span class="caption">password模式</span></p>
<p>client模式：</p>
<p><a href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/20170808145304794.png" title="client模式" class="gallery-item" lg-event-uid="&amp;2"><img src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/20170808145304794.png" alt="client模式"></a><span class="caption">client模式</span></p>
<p>和我们的配置是一致的，仔细看可以发现两者的身份有些许的不同。想要查看更多的debug信息，可以选择下载demo代码自己查看，为了方便读者调试和验证，我去除了很多复杂的特性，基本实现了一个最简配置，涉及到数据库的地方也尽量配置到了内存中，这点记住在实际使用时一定要修改。</p>
<p>到这儿，一个简单的oauth2入门示例就完成了，一个简单的配置教程。token的工作原理是什么，它包含了哪些信息？spring内部如何对身份信息进行验证？以及上述的配置到底影响了什么？这些内容会放到后面的文章中去分析。</p>
<h2 id="示例代码下载"><a href="https://www.cnkirito.moe/Spring-Security-OAuth2-1/#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%E4%B8%8B%E8%BD%BD" class="headerlink" title="示例代码下载"></a>示例代码下载</h2><p>全部的代码可以在我的github上进行下载，项目使用springboot+maven构建：<br><a href="https://github.com/lexburner/oauth2-demo" target="_blank" rel="noopener">https://github.com/lexburner/oauth2-demo</a></p>
<p><strong>欢迎关注我的微信公众号：「Kirito的技术分享」，关于文章的任何疑问都会得到回复，带来更多 Java 相关的技术分享。</strong></p>
<p><a href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/qrcode_for_gh_c06057be7960_258 (1).jpg" title="关注微信公众号" class="gallery-item" lg-event-uid="&amp;3"><img src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/qrcode_for_gh_c06057be7960_258 (1).jpg" alt="关注微信公众号"></a><span class="caption">关注微信公众号</span></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://lexburner.github.io/Spring-Security-OAuth2-1/" data-id="cjsrfgw1v005vmw9e57eqz767" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="https://www.cnkirito.moe/Spring-Security-OAuth2-2/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    Re：从零开始的Spring Security OAuth2（二）
                
            </div>
        </a>
    
    
        <a href="https://www.cnkirito.moe/thinking-in-spring-cloud-feign/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">对于Spring Cloud Feign入门示例的一点思考</div>
        </a>
    
</nav>


    
</article>


    
    
        <section id="comments">
	<div id="commentContainer"><div lang="en-US" class="gitment-container gitment-root-container"><div><div lang="en-US" class="gitment-container gitment-header-container"><span class="gitment-header-like-btn">
    <svg class="gitment-heart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z"></path></svg>
    Like
    
  </span><span>
     • <strong>1</strong> Comments
  </span><a class="gitment-header-issue-link" href="https://github.com/lexburner/lexburner.github.io/issues/23" target="_blank">Issue Page</a></div></div><div><div lang="en-US" class="gitment-container gitment-comments-container"><ul class="gitment-comments-list"><li class="gitment-comment">
      <a class="gitment-comment-avatar" href="https://github.com/superZl" target="_blank">
        <img class="gitment-comment-avatar-img" src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/36983945">
      </a>
      <div class="gitment-comment-main">
        <div class="gitment-comment-header">
          <a class="gitment-comment-name" href="https://github.com/superZl" target="_blank">
            superZl
          </a>
          commented on
          <span title="Wed Aug 22 2018 22:47:09 GMT-0400 (Eastern Daylight Time)">Wed Aug 22 2018</span>
          
          <div class="gitment-comment-like-btn"><svg class="gitment-heart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z"></path></svg> </div>
        </div>
        <div class="gitment-comment-body gitment-markdown">
Bad client credentials
invalid_client
</div>
      </div>
    <img class="gitment-hidden" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></li></ul></div></div><div><div lang="en-US" class="gitment-container gitment-editor-container">
      <a class="gitment-editor-avatar" href="https://github.com/login/oauth/authorize?scope=public_repo&amp;redirect_uri=https%3A%2F%2Fwww.cnkirito.moe%2FSpring-Security-OAuth2-1%2F&amp;client_id=d5fc3e1150477a0d433d&amp;client_secret=aa94acd5f130281051b9e703c19b4c6d878e90c4" title="login with GitHub">
              <svg class="gitment-github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M25 10c-8.3 0-15 6.7-15 15 0 6.6 4.3 12.2 10.3 14.2.8.1 1-.3 1-.7v-2.6c-4.2.9-5.1-2-5.1-2-.7-1.7-1.7-2.2-1.7-2.2-1.4-.9.1-.9.1-.9 1.5.1 2.3 1.5 2.3 1.5 1.3 2.3 3.5 1.6 4.4 1.2.1-1 .5-1.6 1-2-3.3-.4-6.8-1.7-6.8-7.4 0-1.6.6-3 1.5-4-.2-.4-.7-1.9.1-4 0 0 1.3-.4 4.1 1.5 1.2-.3 2.5-.5 3.8-.5 1.3 0 2.6.2 3.8.5 2.9-1.9 4.1-1.5 4.1-1.5.8 2.1.3 3.6.1 4 1 1 1.5 2.4 1.5 4 0 5.8-3.5 7-6.8 7.4.5.5 1 1.4 1 2.8v4.1c0 .4.3.9 1 .7 6-2 10.2-7.6 10.2-14.2C40 16.7 33.3 10 25 10z"></path></svg>
            </a>
    
    <div class="gitment-editor-main">
      <div class="gitment-editor-header">
        <nav class="gitment-editor-tabs">
          <button class="gitment-editor-tab gitment-selected">Write</button>
          <button class="gitment-editor-tab">Preview</button>
        </nav>
        <div class="gitment-editor-login">
          <a class="gitment-editor-login-link" href="https://github.com/login/oauth/authorize?scope=public_repo&amp;redirect_uri=https%3A%2F%2Fwww.cnkirito.moe%2FSpring-Security-OAuth2-1%2F&amp;client_id=d5fc3e1150477a0d433d&amp;client_secret=aa94acd5f130281051b9e703c19b4c6d878e90c4">Login</a> with GitHub
        </div>
      </div>
      <div class="gitment-editor-body">
        <div class="gitment-editor-write-field">
          <textarea placeholder="Leave a comment" title="Login to Comment" disabled=""></textarea>
        </div>
        <div class="gitment-editor-preview-field gitment-hidden">
          <div class="gitment-editor-preview gitment-markdown"></div>
        </div>
      </div>
    </div>
    <div class="gitment-editor-footer">
      <a class="gitment-editor-footer-tip" href="https://guides.github.com/features/mastering-markdown/" target="_blank">
        Styling with Markdown is supported
      </a>
      <button class="gitment-editor-submit" title="Login to Comment" disabled="">Comment</button>
    </div>
  </div></div><div><div lang="en-US" class="gitment-container gitment-footer-container">
    Powered by
    <a class="gitment-footer-project-link" href="https://github.com/imsun/gitment" target="_blank">
      Gitment
    </a>
  </div></div></div></div>
</section>
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <!-- <div class="item-thumbnail">
                            <a href="/direct-io/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div> -->
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="https://www.cnkirito.moe/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></p>
                            <p class="item-title"><a href="https://www.cnkirito.moe/direct-io/" class="title">Java文件IO操作之DirectIO</a></p>
                            <p class="item-date"><time datetime="2019-03-02T07:45:13.000Z" itemprop="datePublished">2019-03-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <!-- <div class="item-thumbnail">
                            <a href="/consistent-hash-lb/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div> -->
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="https://www.cnkirito.moe/categories/RPC/">RPC</a></p>
                            <p class="item-title"><a href="https://www.cnkirito.moe/consistent-hash-lb/" class="title">一致性哈希负载均衡算法的探讨</a></p>
                            <p class="item-date"><time datetime="2019-02-15T07:45:13.000Z" itemprop="datePublished">2019-02-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <!-- <div class="item-thumbnail">
                            <a href="/timer/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div> -->
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="https://www.cnkirito.moe/categories/JAVA/">JAVA</a></p>
                            <p class="item-title"><a href="https://www.cnkirito.moe/timer/" class="title">定时器的几种实现方式</a></p>
                            <p class="item-date"><time datetime="2019-01-24T10:47:55.000Z" itemprop="datePublished">2019-01-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <!-- <div class="item-thumbnail">
                            <a href="/thinging-in-ask/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div> -->
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="https://www.cnkirito.moe/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/">技术杂谈</a></p>
                            <p class="item-title"><a href="https://www.cnkirito.moe/thinging-in-ask/" class="title">提问前，请先让自己成为值得被教的人</a></p>
                            <p class="item-date"><time datetime="2019-01-21T18:18:51.000Z" itemprop="datePublished">2019-01-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <!-- <div class="item-thumbnail">
                            <a href="/heartbeat-design/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div> -->
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="https://www.cnkirito.moe/categories/RPC/">RPC</a></p>
                            <p class="item-title"><a href="https://www.cnkirito.moe/heartbeat-design/" class="title">一种心跳，两种设计</a></p>
                            <p class="item-date"><time datetime="2019-01-11T22:24:09.000Z" itemprop="datePublished">2019-01-12</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/DevOps/">DevOps</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Docker/">Docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/JAVA/">JAVA</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/JAVA%E5%B9%B6%E5%8F%91%E5%90%88%E9%9B%86/">JAVA并发合集</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/JWT/">JWT</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Kong/">Kong</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/MQ/">MQ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/RPC/">RPC</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Spring/">Spring</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Spring-Data-Redis/">Spring Data Redis</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Spring-Security/">Spring Security</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Spring-Security-OAuth2/">Spring Security OAuth2</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/Spring-Session/">Spring Session</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/">响应式编程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/">技术杂谈</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/%E8%A7%84%E5%88%99%E5%BC%95%E6%93%8E/">规则引擎</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="https://www.cnkirito.moe/categories/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/">领域驱动设计</a><span class="category-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2019/03/">三月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2019/02/">二月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2019/01/">一月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/12/">十二月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/09/">九月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/08/">八月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/07/">七月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/06/">六月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/05/">五月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/04/">四月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/03/">三月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/02/">二月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2018/01/">一月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/12/">十二月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/11/">十一月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/10/">十月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/09/">九月 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/08/">八月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/06/">六月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/04/">四月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/03/">三月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2017/02/">二月 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2016/11/">十一月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="https://www.cnkirito.moe/archives/2016/08/">八月 2016</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="https://www.cnkirito.moe/tags/DUBBO/" style="font-size: 10px;">DUBBO</a> <a href="https://www.cnkirito.moe/tags/DevOps/" style="font-size: 11.11px;">DevOps</a> <a href="https://www.cnkirito.moe/tags/DirectIO/" style="font-size: 10px;">DirectIO</a> <a href="https://www.cnkirito.moe/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="https://www.cnkirito.moe/tags/Dubbo/" style="font-size: 10px;">Dubbo</a> <a href="https://www.cnkirito.moe/tags/JAVA/" style="font-size: 20px;">JAVA</a> <a href="https://www.cnkirito.moe/tags/JCTools/" style="font-size: 10px;">JCTools</a> <a href="https://www.cnkirito.moe/tags/JMM/" style="font-size: 10px;">JMM</a> <a href="https://www.cnkirito.moe/tags/JNA/" style="font-size: 10px;">JNA</a> <a href="https://www.cnkirito.moe/tags/JWT/" style="font-size: 12.22px;">JWT</a> <a href="https://www.cnkirito.moe/tags/Kong/" style="font-size: 12.22px;">Kong</a> <a href="https://www.cnkirito.moe/tags/MQ/" style="font-size: 10px;">MQ</a> <a href="https://www.cnkirito.moe/tags/Network/" style="font-size: 10px;">Network</a> <a href="https://www.cnkirito.moe/tags/PolarDB%E6%80%A7%E8%83%BD%E6%8C%91%E6%88%98%E8%B5%9B/" style="font-size: 11.11px;">PolarDB性能挑战赛</a> <a href="https://www.cnkirito.moe/tags/RPC/" style="font-size: 18.89px;">RPC</a> <a href="https://www.cnkirito.moe/tags/Reactor/" style="font-size: 10px;">Reactor</a> <a href="https://www.cnkirito.moe/tags/RxJava/" style="font-size: 10px;">RxJava</a> <a href="https://www.cnkirito.moe/tags/Servlet/" style="font-size: 10px;">Servlet</a> <a href="https://www.cnkirito.moe/tags/Spring/" style="font-size: 17.78px;">Spring</a> <a href="https://www.cnkirito.moe/tags/Spring-Cloud/" style="font-size: 12.22px;">Spring Cloud</a> <a href="https://www.cnkirito.moe/tags/Spring-Cloud-Zuul/" style="font-size: 11.11px;">Spring Cloud Zuul</a> <a href="https://www.cnkirito.moe/tags/Spring-Data-Redis/" style="font-size: 11.11px;">Spring Data Redis</a> <a href="https://www.cnkirito.moe/tags/Spring-Security/" style="font-size: 15.56px;">Spring Security</a> <a href="https://www.cnkirito.moe/tags/Spring-Security-OAuth2/" style="font-size: 12.22px;">Spring Security OAuth2</a> <a href="https://www.cnkirito.moe/tags/Spring-Session/" style="font-size: 13.33px;">Spring Session</a> <a href="https://www.cnkirito.moe/tags/TCP/" style="font-size: 11.11px;">TCP</a> <a href="https://www.cnkirito.moe/tags/Validation/" style="font-size: 11.11px;">Validation</a> <a href="https://www.cnkirito.moe/tags/XML/" style="font-size: 11.11px;">XML</a> <a href="https://www.cnkirito.moe/tags/Zipkin/" style="font-size: 10px;">Zipkin</a> <a href="https://www.cnkirito.moe/tags/drools/" style="font-size: 13.33px;">drools</a> <a href="https://www.cnkirito.moe/tags/lua/" style="font-size: 10px;">lua</a> <a href="https://www.cnkirito.moe/tags/motan/" style="font-size: 10px;">motan</a> <a href="https://www.cnkirito.moe/tags/redis/" style="font-size: 10px;">redis</a> <a href="https://www.cnkirito.moe/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="https://www.cnkirito.moe/tags/%E4%B8%AD%E6%96%87%E6%8E%92%E7%89%88/" style="font-size: 10px;">中文排版</a> <a href="https://www.cnkirito.moe/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 11.11px;">事务</a> <a href="https://www.cnkirito.moe/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 10px;">代码规范</a> <a href="https://www.cnkirito.moe/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 14.44px;">多线程</a> <a href="https://www.cnkirito.moe/tags/%E5%BC%80%E6%BA%90/" style="font-size: 10px;">开源</a> <a href="https://www.cnkirito.moe/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 10px;">微服务</a> <a href="https://www.cnkirito.moe/tags/%E5%BF%83%E8%B7%B3/" style="font-size: 10px;">心跳</a> <a href="https://www.cnkirito.moe/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/" style="font-size: 16.67px;">技术杂谈</a> <a href="https://www.cnkirito.moe/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="https://www.cnkirito.moe/tags/%E6%9D%82%E8%B0%88/" style="font-size: 10px;">杂谈</a> <a href="https://www.cnkirito.moe/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" style="font-size: 13.33px;">架构设计</a> <a href="https://www.cnkirito.moe/tags/%E6%B1%82%E8%81%8C/" style="font-size: 10px;">求职</a> <a href="https://www.cnkirito.moe/tags/%E7%BD%91%E5%85%B3/" style="font-size: 11.11px;">网关</a> <a href="https://www.cnkirito.moe/tags/%E8%A7%84%E5%88%99%E5%BC%95%E6%93%8E/" style="font-size: 13.33px;">规则引擎</a> <a href="https://www.cnkirito.moe/tags/%E9%98%9F%E5%88%97/" style="font-size: 10px;">队列</a> <a href="https://www.cnkirito.moe/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" style="font-size: 11.11px;">领域驱动设计</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://ntzyz.io/">namespace_ntzyz</a>
                    </li>
                
                    <li>
                        <a href="http://blog.didispace.com/">程序猿DD|博客</a>
                    </li>
                
                    <li>
                        <a href="http://vip.iocoder.cn/">芋道源码</a>
                    </li>
                
                    <li>
                        <a href="http://www.jiangxinlingdu.com/">匠心零度</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up" style="display: block; left: 1395.52px;"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            © 2019 徐靖峰<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
	<link rel="stylesheet" href="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/default.css">
	<script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/gitment.browser.js"></script>
	<script>
		var gitment = new Gitment({
			owner: 'lexburner',
			repo: 'lexburner.github.io',
			oauth: {
				client_id: 'd5fc3e1150477a0d433d',
				client_secret: 'aa94acd5f130281051b9e703c19b4c6d878e90c4',
			},
		})
		gitment.render('commentContainer')
	</script>
	



    
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lightgallery.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-thumbnail.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-pager.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-autoplay.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-fullscreen.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-zoom.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-hash.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-share.min.js"></script>
        <script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/lg-video.min.js"></script>
    
    
    



<!-- Custom Scripts -->
<script src="./Re：从零开始的Spring Security OAuth2（一） _ 徐靖峰_个人博客_files/main.js"></script>

    </div><div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"><section class="ins-section"><header class="ins-section-header">文章</header><div class="ins-selectable ins-search-item" data-url="/direct-io/"><header><i class="fa fa-file"></i>Java文件IO操作之DirectIO</header><p class="ins-search-preview">在前文《文件IO操作的一些最佳实践》中，我介绍了一些 Java 中常见的文件操作的接口，并且就 PageCache 和 DIrect IO 进行了探讨，最近我自己封装了一个 Direct IO 的库，趁着这个机会，本文重点谈谈 Java 中 Direct IO 的意义，以及简单介绍下我自己的轮子。 </p></div><div class="ins-selectable ins-search-item" data-url="/consistent-hash-lb/"><header><i class="fa fa-file"></i>一致性哈希负载均衡算法的探讨</header><p class="ins-search-preview">前言一致性哈希算法在很多领域有应用，例如分布式缓存领域的 MemCache，Redis，负载均衡领域的 Nginx，各类 RPC 框架。不同领域场景不同，需要顾及的因素也有所差异，本文主要讨论在负载均衡中一致性哈希算法的设计。 在介绍一致性哈希算法之前，我将会介绍一些哈希算法，讨论它们的区别和使用场</p></div><div class="ins-selectable ins-search-item" data-url="/timer/"><header><i class="fa fa-file"></i>定时器的几种实现方式</header><p class="ins-search-preview">1 前言在开始正题之前，先闲聊几句。有人说，计算机科学这个学科，软件方向研究到头就是数学，硬件方向研究到头就是物理，最轻松的是中间这批使用者，可以不太懂物理，不太懂数学，依旧可以使用计算机作为自己谋生的工具。这个规律具有普适应，看看“定时器”这个例子，往应用层研究，有 Quartz，Spring S</p></div><div class="ins-selectable ins-search-item" data-url="/thinging-in-ask/"><header><i class="fa fa-file"></i>提问前，请先让自己成为值得被教的人</header><p class="ins-search-preview">每一个不恰当的提问都在消耗别人对你的耐心，程序员届早已经有了诸如《提问的智慧》之类的经典文章介绍了什么是蠢问题，如何避免问蠢问题。然而，常年混迹于十几个技术交流微信群的我，发现很多小白程序员并不懂得这一点，为改善微信群的技术交流氛围，转此文，意图是让大家在担任提问者的角色时，尽可能提高提问的素质，让</p></div><div class="ins-selectable ins-search-item" data-url="/heartbeat-design/"><header><i class="fa fa-file"></i>一种心跳，两种设计</header><p class="ins-search-preview">1 前言在前一篇文章《聊聊 TCP 长连接和心跳那些事》中，我们已经聊过了 TCP 中的 KeepAlive，以及在应用层设计心跳的意义，但却对长连接心跳的设计方案没有做详细地介绍。事实上，设计一个好的心跳机制并不是一件容易的事，就我所熟知的几个 RPC 框架，它们的心跳机制可以说大相径庭，这篇文章</p></div></section><section class="ins-section"><header class="ins-section-header">页面</header><div class="ins-selectable ins-search-item" data-url="/about/index.html"><header><i class="fa fa-file"></i>徐靖峰</header><p class="ins-search-preview">联系方式 Email：kirito.moe@foxmail.com 微信号：xiayimiaoshenghua 个人信息 徐靖峰/男/1995 Github：https://github.com/lexburner 微信公众号Kirito的技术分享</p></div><div class="ins-selectable ins-search-item" data-url="/categories/index.html"><header><i class="fa fa-file"></i>Categories</header></div><div class="ins-selectable ins-search-item" data-url="/tags/index.html"><header><i class="fa fa-file"></i>Tags</header></div></section><section class="ins-section"><header class="ins-section-header">分类</header><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/categories/数据库/"><header><i class="fa fa-folder"></i>数据库<span class="ins-slug">数据库</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/categories/RPC/"><header><i class="fa fa-folder"></i>RPC<span class="ins-slug">RPC</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/categories/JAVA/"><header><i class="fa fa-folder"></i>JAVA<span class="ins-slug">JAVA</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/categories/技术杂谈/"><header><i class="fa fa-folder"></i>技术杂谈<span class="ins-slug">技术杂谈</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/categories/响应式编程/"><header><i class="fa fa-folder"></i>响应式编程<span class="ins-slug">响应式编程</span></header></div></section><section class="ins-section"><header class="ins-section-header">标签</header><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/tags/DirectIO/"><header><i class="fa fa-tag"></i>DirectIO<span class="ins-slug">DirectIO</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/tags/JNA/"><header><i class="fa fa-tag"></i>JNA<span class="ins-slug">JNA</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/tags/RPC/"><header><i class="fa fa-tag"></i>RPC<span class="ins-slug">RPC</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/tags/JAVA/"><header><i class="fa fa-tag"></i>JAVA<span class="ins-slug">JAVA</span></header></div><div class="ins-selectable ins-search-item" data-url="http://lexburner.github.io/tags/技术杂谈/"><header><i class="fa fa-tag"></i>技术杂谈<span class="ins-slug">技术杂谈</span></header></div></section></div>
        </div>
    </div>
</div>

</body></html>